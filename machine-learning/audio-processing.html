
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://science-camp-tui.github.io/tutorials/machine-learning/audio-processing.html">
      
      
        <link rel="prev" href="index.html">
      
      
        <link rel="next" href="bird-classification.html">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.25">
    
    
      
        <title>Audio Processing - Science Camp 2024 - Workshop Tutorials</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6543a935.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#audio-processing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="Science Camp 2024 - Workshop Tutorials" class="md-header__button md-logo" aria-label="Science Camp 2024 - Workshop Tutorials" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Science Camp 2024 - Workshop Tutorials
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Audio Processing
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Science Camp 2024 - Workshop Tutorials" class="md-nav__button md-logo" aria-label="Science Camp 2024 - Workshop Tutorials" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Science Camp 2024 - Workshop Tutorials
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../starter/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Starter Tutorial
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Machine Learning Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Machine Learning Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Audio Processing
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="audio-processing.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Audio Processing
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#digital-representation-of-audio-data" class="md-nav__link">
    <span class="md-ellipsis">
      Digital representation of audio data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lesson-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Lesson Steps
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lesson Steps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#part-1-loading-and-saving-audio" class="md-nav__link">
    <span class="md-ellipsis">
      Part 1 - Loading and saving audio
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#part-2-splitting-audio-and-plotting-the-signal" class="md-nav__link">
    <span class="md-ellipsis">
      Part 2 - Splitting audio and plotting the signal
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="bird-classification.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bird Classification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="code-snippets.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code-Snippets
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    IoT System Tutorial
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            IoT System Tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../system/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System Components
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../system/code-snippets.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code-Snippets
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Dashboard Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Dashboard Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dashboard/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dashboard Tutorial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dashboard/join.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Joins
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="audio-processing">Audio Processing</h1>
<h2 id="introduction">Introduction</h2>
<p>The goal of this lesson is to</p>
<ul>
<li>load an audio file </li>
<li>divide the file into pieces of a specific length (chunks)</li>
<li>plot the signal of a chunk</li>
<li>save the signal to a file and listen to it </li>
</ul>
<p>In order for you to get a feeling of how audio data is represented in a computer read the following section.</p>
<h3 id="digital-representation-of-audio-data">Digital representation of audio data<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup></h3>
<p>The jounrey from a physical sound wave to its digital representation is as follows:</p>
<ol>
<li>
<p><strong>Sound Capture</strong>: Sound waves from voices, instruments, or any audio source hit the microphone.</p>
</li>
<li>
<p><strong>Electrical Conversion:</strong>: Inside the microphone, there's a device that converts these sound waves into electrical signals. These signals are still analog, which means they vary continuously like the original sound waves. The microphone sends these analog signals to an ADC (Analog-Digital-Convert). </p>
</li>
<li>
<p><strong>Sampling</strong>: The ADC takes snapshots of the analog signal at regular intervals. This is called 'sampling'. Each snapshot measures the amplitude (volume) of the audio signal at that specific moment. The rate at which this happens is called <code>sampling rate</code>. A typical sampling rate is 44100 Hz which means the ADC takes 44100 measurements per second. </p>
</li>
<li>
<p><strong>Quantization</strong>: Each sampled amplitude value is then converted into a digital number. The range of numbers that can be used is determined by the 'bit depth'. Higher bit depth means the audio can be more accurately represented. A typical bit depth ist 16 bit. That means that 2^16=65536 different values can be stored for each sample. </p>
</li>
<li>
<p><strong>Binary Representation</strong>: The numbers are converted into binary code, which is a series of 0s and 1s, because that's the language computers understand. A wave file contains all the samples at their specific bit depth. </p>
</li>
<li>
<p><strong>Compression and Encoding (Optional)</strong>: Sometimes the raw audio data is compressed to save space. Famous compression methods are MP3 (MPEG-1 Layer 3) or AAC (Advanced Audio Coding).</p>
</li>
<li>
<p><strong>Storage</strong>: Finally, these binary numbers are stored in a file on the computer. If it's a WAV file, it also includes a header with information about the audio like its sample rate, bit depth, and channels (mono or stereo).</p>
</li>
</ol>
<p>You'll find a more detailed introduction <a href="https://woodandfirestudio.com/en/sample-rate-bit-depth/" target="_blank">here</a><sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup></p>
<h2 id="lesson-steps">Lesson Steps</h2>
<h3 id="part-1-loading-and-saving-audio">Part 1 - Loading and saving audio</h3>
<p>The file <a href="files/test_1min.wav" target="_blank">test_1min.wav</a> contains a one minute recording of bird sounds. </p>
<ol>
<li>
<p>Download the file <a href="files/test_1min.wav" target="_blank">test_1min.wav</a> and store it in your project folder under a new folder you name <code>testdata</code>. </p>
</li>
<li>
<p>Create a file <code>audio.py</code> in the <code>birdnet_-_mini</code> folder. This will contain all your audio processing functions. Your directory shall now look like this:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>└───birdnet-mini
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    ├───birdnet_mini
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    |       audio.py
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    │       main.py
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    |       __init__.py
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    │
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    └───testdata
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>            test_1min.wav
</span></code></pre></div>
</li>
<li>
<p>In <code>audio.py</code> create a new function called <code>open_audio_file</code> with the following signature: </p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a> <span class="k">def</span> <span class="nf">open_audio_file</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">sample_rate</span><span class="o">=</span><span class="mi">48000</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span> 
</span></code></pre></div>
<p>Use the <a href="https://librosa.org/doc/latest/generated/librosa.load.html#librosa.load" target="_blank">load function</a> from the Python package librosa to load the file inside the function as <strong>mono audio</strong> and return the sample samples and the sample rate. <code>offset</code> and <code>duration</code>  are important arguments, when files are too large to be loaded at once. they allow for loading only a part of the file.</p>
</li>
<li>
<p>Write another function <code>save_signal</code> that takes a filename, a signal (samples) as arguments and uses the <a href="https://python-soundfile.readthedocs.io/en/0.11.0/#read-write-functions" target="_blank">write function</a> from the soundfile package to write an audio signal to a wav file.</p>
</li>
<li>
<p>Now go back to <code>main.py</code>, import your two functions and test them by loading the test file <code>test_1min.wav</code> and save it again under a different name. Listen to the saved file! </p>
</li>
<li>
<p>Have a look at how the signal is stored as a <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html" target="_blank">numpy array</a>. </p>
</li>
</ol>
<h3 id="part-2-splitting-audio-and-plotting-the-signal">Part 2 - Splitting audio and plotting the signal</h3>
<p>In order to process the audio by the machine learning model, we need to split it into chunks of a specific length.</p>
<ol>
<li>
<p>In the file <code>audio.py</code> Write a function <code>split_signal</code> that takes a signal and a chunk length as arguments and returns a list of chunks. The function signature may look like this:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="k">def</span> <span class="nf">split_signal</span><span class="p">(</span><span class="n">signal</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">rate</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">seconds</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span> <span class="n">overlap</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">min_len</span><span class="p">:</span><span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span></code></pre></div>
<p>Remember that your signal is stored as samples. Use <a href="https://numpy.org/doc/stable/user/basics.indexing.html" target="_blank">numpy indexing</a> to split the signal into chunks of a specific length given in seconds. The overlap is sometimes used to make the result more robust. You may omit it if that's too complicated.</p>
</li>
<li>
<p>(Optional) The signal may not always have a length to get an integer number of chunks. Test if the chunks are too short and if so, add random noise to the end of the signal to make it meet the requested length. You may use the numpy random function to create gaussian noise. </p>
</li>
<li>
<p>Return the chunks in a default python list.</p>
</li>
<li>
<p>Test your function in <code>main.py</code> by loading the test file and splitting it into chunks of 3 seconds. </p>
</li>
<li>
<p>Now plot the signal of one of the chunks using the <a href="https://matplotlib.org/stable/contents.html" target="_blank">matplotlib</a> package. The result for chunk 0 should look like this:</p>
<p><img alt="Signal Plot" src="pictures/signal_plot.png" /></p>
</li>
<li>
<p>Notice, that the signals amplitude is oscillating between -1 and 1 which is a typical data representation for audio signals. Also notice, that the amplitude it rather small.</p>
</li>
<li>
<p>(Optional) To get a better understanding of which frequencies are usually in the signal (over time), you may create a spectrogram of the signal using the <a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.spectrogram.html#scipy.signal.spectrogram" target="_blank">scipy- signal - module</a> and plot it with matplotlib as well: </p>
<p><img alt="Spectrogram" src="pictures/signal_spectrogram_plot.png" /></p>
</li>
</ol>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>The section was partly produced by GPT-4 Turbo and manually modified afterwards.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>Link leads to external resources. Neither TU Ilmenau no any other party involved in this tutorial are responsible for the content linked.&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
</ol>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.path", "toc.integrate"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.081f42fc.min.js"></script>
      
    
  </body>
</html>