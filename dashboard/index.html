
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://science-camp-tui.github.io/tutorials/dashboard/index.html">
      
      
        <link rel="prev" href="../system/code-snippets.html">
      
      
        <link rel="next" href="join.html">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.25">
    
    
      
        <title>Dashboard Tutorial - Science Camp 2024 - Workshop Tutorials</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6543a935.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#dashboard-tutorials" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="Science Camp 2024 - Workshop Tutorials" class="md-header__button md-logo" aria-label="Science Camp 2024 - Workshop Tutorials" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Science Camp 2024 - Workshop Tutorials
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Dashboard Tutorial
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Science Camp 2024 - Workshop Tutorials" class="md-nav__button md-logo" aria-label="Science Camp 2024 - Workshop Tutorials" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Science Camp 2024 - Workshop Tutorials
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../starter/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Starter Tutorial
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Machine Learning Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Machine Learning Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../machine-learning/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../machine-learning/audio-processing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Audio Processing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../machine-learning/bird-classification.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bird Classification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../machine-learning/code-snippets.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code-Snippets
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    IoT System Tutorial
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            IoT System Tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../system/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System Components
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../system/code-snippets.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code-Snippets
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Dashboard Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Dashboard Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Dashboard Tutorial
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="index.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Dashboard Tutorial
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#basics" class="md-nav__link">
    <span class="md-ellipsis">
      Basics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lesson-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Lesson steps
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lesson steps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-dashboard" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a dashboard
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-a-visualization" class="md-nav__link">
    <span class="md-ellipsis">
      Adding a visualization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-filters" class="md-nav__link">
    <span class="md-ellipsis">
      Adding filters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-a-proper-visualization" class="md-nav__link">
    <span class="md-ellipsis">
      Adding a proper visualization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accesing-an-external-ressourceadding-labels" class="md-nav__link">
    <span class="md-ellipsis">
      Accesing an external ressource/Adding labels
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#free-working" class="md-nav__link">
    <span class="md-ellipsis">
      Free working
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="join.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Joins
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="dashboard-tutorials">Dashboard Tutorials</h1>
<h2 id="basics">Basics</h2>
<p>In this lesson you will</p>
<ul>
<li>Create a Grafana dashboard</li>
<li>Add visualizations based on the collected data</li>
<li>Filter the data to represent specific information</li>
</ul>
<p>We have already set up a basic Grafana Instance on the same server the database storing the data lies on. This includes adding the database holding all the collected data as a data souce so that you can directly start creating a dashboard.</p>
<h2 id="lesson-steps">Lesson steps</h2>
<h3 id="creating-a-dashboard">Creating a dashboard</h3>
<ol>
<li>Connect to the Grafana server using the following link <a href="http://141.24.194.106:20203">http://141.24.194.106:20203</a>.</li>
<li>Log in using the credentials we gave you.</li>
<li>Click <code>Dashboards</code> on the left.</li>
<li>Click <code>New</code> on the right and then <code>New dashboard</code>.
<img alt="dashboardView" src="pictures/createDashboard.jpg" /></li>
</ol>
<h3 id="adding-a-visualization">Adding a visualization</h3>
<ol>
<li>Click <code>Add visualization</code>.</li>
<li>Select <code>influxdb</code> as the data source.</li>
<li>First we want to see just the raw data, so set the visualization type in the upper right corner to <code>Table</code> and set the time frame to <code>Last 2 years</code>.</li>
<li>Now enter the following query into the text field at the bottom.
   <div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>   from(bucket: &quot;BirdData&quot;)
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    |&gt; range(start: v.timeRangeStart, stop:v.timeRangeStop)
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    |&gt; group(columns: [])
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    |&gt; limit(n:5)
</span></code></pre></div></li>
<li>When your done click save, give your dashboard a name and click save again
<img alt="viewdata" src="pictures/viewData.jpg" /></li>
</ol>
<h3 id="adding-filters">Adding filters</h3>
<p>As you can see, the data contains the confidence value. Since the AI model doesn't have an output for <code>no bird detected</code> it will always classify some bird for every measurement. If there is indeed no bird in the sample it will usually show by a very low confidence. So it would be good to filter out entries with a confidence below a certain threshold.</p>
<ol>
<li>Go to the Dasboard settings(the gear at top right) and select the tab <code>Variables</code>.</li>
<li>Click <code>Add variable</code>.</li>
<li>Create a variable with the type <code>Custom</code>, give it a name(how you refere to the value in your query, for example <code>minConf</code>), a label(Name that will be displayed in the dashboard) and enter some boundaries in custom options(for example <code>0.9, 0.75, 0.5, 0.25, 0</code>).</li>
<li>Click <code>Apply</code> and <code>Close</code> at the top right.</li>
<li>Click <code>Add</code> at the top right and select <code>Visualization</code>.</li>
<li>Select as visualization type again a <code>table</code> and copy the code from earlier.</li>
<li>Add a filter command between the range and the group command. The full query should look something like this.
   <div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>   from(bucket: &quot;BirdData&quot;)
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>     |&gt; range(start: v.timeRangeStart, stop:v.timeRangeStop)
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>     |&gt; filter(fn: (r) =&gt; r._value &gt; ${minConf},)
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>     |&gt; group(columns: [])
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>     |&gt; limit(n:5)
</span></code></pre></div></li>
<li>Click <code>Apply</code> in the top right and compare how the two tables look, especialy for <code>minConf=0</code> and <code>minConf=0.9</code>.</li>
<li>You can edit a visualization by hovering over it with the cursor and clicking at the three dots appearing in the upper rigth corner and then clicking <code>edit</code>. Do that for both tables and change their names()On the right side under <code>Panel options</code> the field <code>titel</code> so that they are distinguishable. Dont forget to save the dashboard once your done.</li>
</ol>
<h3 id="adding-a-proper-visualization">Adding a proper visualization</h3>
<p>While the raw data might be useful, what we want from a dashboard is seeing important values with ease. So lets add a counter how many birds were recognised with the given confidence </p>
<ol>
<li>Add another visualization, this time of the type <code>Stat</code></li>
<li>You can reuse the query from the filtered table.</li>
<li>Instead of limiting the number entries we want to count them. Replace the <code>limit</code> command with the count command. It sould look like this:
   <div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>   from(bucket: &quot;BirdData&quot;)
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>     |&gt; range(start: v.timeRangeStart, stop:v.timeRangeStop)
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>     |&gt; filter(fn: (r) =&gt; r._value &gt; ${minConf},)
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>     |&gt; group(columns: [])
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>     |&gt; count()
</span></code></pre></div></li>
<li>Name the visualization, apply and save.</li>
</ol>
<p>Another interesting stat would be what birds were recognized the most. Lets add a visualization for that. </p>
<ol>
<li>Add another visualization. The are some types you can choose from, but this tutorial will use the <code>Bar gauge</code> (Hint: Select <code>Table</code> as the type to understand how the changes in the query effects the data every step)</li>
<li>For the query, we can use the first three lines from the code above since that essentially just returns all measurements that have the required confidence.</li>
<li>Next, we want to group all measurements that were of the same bird. We can do this by <code>|&gt; group(columns: ["birdId"])</code>. This creates groups of measurements with the same <code>BirdID</code>. You can imagine a group as a simple table.</li>
<li>Since we want to know how often each bird was detected we add <code>count()</code>. This counts the measurements in every group and replaces the group content with that value.</li>
<li>For the <code>Bar gauge</code> we need the data in a single group, but right now every bird has its own group. We fix this by adding <code>group()</code>.</li>
<li>Finally we want the birds in order, therefore we need to sort the current group. We can do this by adding <code>sort(desc: true)</code>. This sorts our group entries in descending order, meaning the bird that was spotted the most often should be listed first.
   <div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>   from(bucket: &quot;BirdData&quot;)
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>     |&gt; range(start: v.timeRangeStart, stop:v.timeRangeStop)
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>     |&gt; filter(fn: (r) =&gt; r._value &gt; ${minConf},)
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>     |&gt; group(columns: [&quot;birdId&quot;])
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>     |&gt; count()
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>     |&gt; group()
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>     |&gt; sort(desc: true)
</span></code></pre></div></li>
<li>On the right side under <code>Value options</code> change <code>Calculate</code> to <code>All values</code></li>
<li>You can customise the visualization if you want. For example changing the orientation to horizontal makes it easier to understand. Dont forget to save once your done.</li>
<li>As you might have noticed, instead of bird names the bars are labled with the IDs. This is due to way the data is stored in the database. For now its fine, but if you're insterested you can check <a href="https://github.com/Science-Camp-TUI/birdnet-mini/blob/main/idToLabels.csv">here</a> which ID belongs to which bird.</li>
</ol>
<h3 id="accesing-an-external-ressourceadding-labels">Accesing an external ressource/Adding labels</h3>
<p>In the last task we had the problem that the measurements in the DB only holds the IDs of the classified bird, but not the actual name. But fortunatly we have a table holding the IDs and corresponding names. In this step we want to load the data into the query and modify the result form the last task in a way that the bars are labled with the actual name rather than the ID.</p>
<ol>
<li>First, reopen the visualization by hovering the cursor over the diagramm, clicking the three dots in the upper right corner and selecting <code>edit</code></li>
<li>Bind the current query result to a variable. You can do this by choosing a name(we will use <code>left</code> since we will perform a left join later but any name is valid) and writing <code>name=</code> in front of the <code>from(bucket: "BirdData")</code>.</li>
<li>Next add the following three lines at the top of the query. These packages provide the functions to load and transform the table from earlier into a flux query object
   <div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>   import &quot;csv&quot;
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>   import &quot;experimental/http&quot;
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>   import &quot;join&quot;
</span></code></pre></div></li>
<li>Now we first need to load the csv using the following line. This simply performs a <code>HTTP get</code> request to github to the same ressource that is linked to earlier. (You might notice that the links aren't identical. This is due to github usually providing a visualy enhanced file. But since we need the raw data we access that in this query directly. If you're curious you can open the link from the sample to see the raw data yourself)
   <div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>   csvData = string(v: http.get(url: &quot;https://raw.githubusercontent.com/Science-Camp-TUI/birdnet-mini/main/idToLabels.csv&quot;).body)
</span></code></pre></div></li>
<li>For now the csvData variable only holds the data as a string(the datatype for text). To transform this to a proper flux query object we need to parse it. Fortunatly there is a already defined function for that in the <code>csv</code>-package we imported earlier. Add the following line to your code. Note that we bind the result to the variable <code>right</code> as the second part of our join operation.
   <div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>   right=csv.from(csv: csvData, mode: &quot;raw&quot;)
</span></code></pre></div></li>
<li>Now that the label data is loaded and parsed we can combine it with our earlier result. To do that we need to perform a <code>left join</code> on the earlier result. Just copy the code below into your query. You can read <a href="join.html">this</a> if you don't know what a <code>join</code> is.
   <div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>   res=join.left(
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>       left: left,
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>       right: right,
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>       on: (l, r) =&gt; l.birdId == r.BirdID,
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>       as: (l, r) =&gt; ({l with name: r.GermanName, _value: l._value}),
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>   )
</span></code></pre></div></li>
<li>The only things left to do is clarifying what data to show and to sort that data. We can do this by removing all columns that are unnecessary and keeping only the <code>name</code> and the <code>_value</code> columns of our <code>join</code> result <code>result</code> and sorting after that. Your query code should look like this.
   <div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>   import &quot;csv&quot;
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>   import &quot;experimental/http&quot;
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>   import &quot;join&quot;
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>   csvData = string(v: http.get(url: &quot;https://raw.githubusercontent.com/Science-Camp-TUI/birdnet-mini/main/idToLabels.csv&quot;).body)
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>   right=csv.from(csv: csvData, mode: &quot;raw&quot;)
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>   left=from(bucket: &quot;BirdData&quot;)
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>     |&gt; range(start: v.timeRangeStart, stop:v.timeRangeStop)
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>     |&gt; filter(fn: (r) =&gt; r._value &gt; ${minConf},)
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>     |&gt; group(columns: [&quot;birdId&quot;])
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a>     |&gt; count()
</span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a>     |&gt; group()
</span><span id="__span-8-16"><a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a>     |&gt; sort(desc: true)
</span><span id="__span-8-17"><a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a>
</span><span id="__span-8-18"><a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a>   result=join.left(
</span><span id="__span-8-19"><a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a>       left: left,
</span><span id="__span-8-20"><a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a>       right: right,
</span><span id="__span-8-21"><a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a>       on: (l, r) =&gt; l.birdId == r.BirdID,
</span><span id="__span-8-22"><a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a>       as: (l, r) =&gt; ({l with name: r.GermanName, _value: l._value}),
</span><span id="__span-8-23"><a id="__codelineno-8-23" name="__codelineno-8-23" href="#__codelineno-8-23"></a>   )
</span><span id="__span-8-24"><a id="__codelineno-8-24" name="__codelineno-8-24" href="#__codelineno-8-24"></a>
</span><span id="__span-8-25"><a id="__codelineno-8-25" name="__codelineno-8-25" href="#__codelineno-8-25"></a>   result
</span><span id="__span-8-26"><a id="__codelineno-8-26" name="__codelineno-8-26" href="#__codelineno-8-26"></a>   |&gt; keep(columns: [&quot;name&quot;, &quot;_value&quot;])
</span><span id="__span-8-27"><a id="__codelineno-8-27" name="__codelineno-8-27" href="#__codelineno-8-27"></a>   |&gt; sort(desc: true)
</span></code></pre></div></li>
<li>You can customize the visualization. Dont forget to save once you're done. </li>
</ol>
<h3 id="free-working">Free working</h3>
<p>Now that you have some basic knowlege about writing queues you can add visualisations for other stats you think are important freely. Some possible examples are</p>
<ul>
<li>What is the relation between the detected bird species(Pie chart)</li>
<li>Add a filter for a specific bird type</li>
<li>How often was the selected bird detected(Stat)</li>
<li>At what times over the day was the bird detected(Time series)</li>
<li>Where was the bird detected(Geomap)</li>
<li>Add a filter for the different measurement locations</li>
<li>All already mentioned things but filtered for the station</li>
<li>And a lot more...</li>
</ul>
<p>If you need help you can always ask the instructor. A helpful ressource is the <a href="https://docs.influxdata.com/flux/v0/">flux documentation</a> for general questions.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.path", "toc.integrate"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.081f42fc.min.js"></script>
      
    
  </body>
</html>